<!doctype html>
<html>
<head>
	<script type="text/javascript" src="jquery.js"></script>
	<script type="text/javascript" src="progressbar.js"></script>

	<link rel="stylesheet" type="text/css" href="progressbar.css">
	<title>Lab8 | Download Manager</title>
</head>
<body>
<br/><br/>
<center><h3>Download Manager</h3></center>

	<div id="progressBar" class="default" ><div></div></div>
<audio id="inter">
<source src="1.mp3"></source>
</audio>

<audio id="complete">
<source src="2.mp3"></source>
</audio>

	<script>
		var ct=0,c50=0,c80=0,c100=0;
		var filesize=Math.floor(Math.random() * (4000-1000+1))+1000;
		progressBar(0, $('#progressBar'));
        
		function getNextRate() {
        return Math.floor(Math.random() * (5 - 1  + 1)) + 1;
        }
		function getNextRate1() {
        return Math.floor(Math.random() * (filesize + 1)) + (filesize/4);
        }
        setTimeout(function foo(){
		ct=ct+getNextRate();
		if(ct>100)
		progressBar(100,$('#progressBar'));
		else
        progressBar(ct, $('#progressBar'));
		if(ct<20)
		$(".default div").css("background-color", "#FF0000").css("background","-webkit-linear-gradient(top, #0099FF, #FF0000)").css("background","-moz-linear-gradient(top, #0099FF, #FF0000); ");
		else if(ct>=20 && ct<40)
		$(".default div").css("background-color", "#FFFF00").css("background","-webkit-linear-gradient(top, #0099FF, #FFFF00)").css("background","-moz-linear-gradient(top, #0099FF, #FFFF00); ");
		else if(ct>=40 && ct<50)
		{$(".default div").css("background-color", "#80FF00").css("background","-webkit-linear-gradient(top, #0099FF, #80FF00)").css("background","-moz-linear-gradient(top, #0099FF, #80FF00); ");
		if(c50==0)
		c50=1;
		}
		else if(ct>=50 && ct<60)
		$(".default div").css("background-color", "#00FFFF").css("background","-webkit-linear-gradient(top, #0099FF, #00FFFF)").css("background","-moz-linear-gradient(top, #0099FF, #00FFFF); ");
		else if(ct>=60 && ct<80)
		$(".default div").css("background-color", "#0000FF").css("background","-webkit-linear-gradient(top, #0099FF, #0000FF)").css("background","-moz-linear-gradient(top, #0099FF, #0000FF); ");
		else if(ct>=80 && ct<100)
		{
		if(c80==0)
		c80=1;
		$(".default div").css("background-color", "#FF00FF").css("background","-webkit-linear-gradient(top, #0099FF, #FF00FF)").css("background","-moz-linear-gradient(top, #0099FF, #FF00FF); ");
		}else
		{
		if(c100==0)
		c100=1;
		$(".default div").css("background-color", "#FF8000").css("background","-webkit-linear-gradient(top, #0099FF, #FF8000)").css("background","-moz-linear-gradient(top, #0099FF, #FF8000); ");
		}
		if(c50==1)
		{
		c50=2;
		var soundFx = $( '#inter' );
		soundFx[0].play();
		}
		else if(c80==1)
		{
		c80=2;
		var soundFx = $( '#inter' );
		soundFx[0].play();soundFx[0].play();
		}
		else if(c100==1)
		{
		c100=2;
		var soundFx = $( '#complete' );
		soundFx[0].play();
		
		}
        setTimeout(foo, getNextRate1());
        }, getNextRate1());
		getNextRate();
		</script>

</body>
</html>